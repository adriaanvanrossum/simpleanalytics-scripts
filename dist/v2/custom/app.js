/* Simple Analytics - Privacy friendly analytics (docs.simpleanalytics.com/script; 2020-02-10; ba0e) */

!function(d,t){if(d){var e="https:",n=e+"//",h=n+t+"/v2/post",r=n+t,l=n+t+"/v1/visit",a=d.console,i="doNotTrack",p="pageviews",f="events",o=d.navigator,s=o.userAgent,c=d.location,u=d.document,m=c.hostname,v="Not sending requests ",g="Content-Type",y=null,w=encodeURIComponent,T=decodeURIComponent,E="text/plain; charset=UTF-8",b=d.addEventListener,q=function(e){a&&a.warn&&a.warn("Simple Analytics: "+e)};b("error",function(e){e.filename&&-1<e.filename.indexOf(t)&&ne(e.message)},!1);function x(e,t){return e&&e.getAttribute("data-"+t)}var O,S,M="pushState",R=d.dispatchEvent,D=Date.now(),H=0,B=u.querySelector('script[src*="'+t+'"]'),C=x(B,"mode"),I="true"===x(B,"skip-dnt"),L=x(B,"sa-global")||"sa";if(!I&&i in o&&"1"===o[i])return q(v+"when "+i+" is enabled");if(-1===m.indexOf("."))return q(v+"from localhost");if(!s||-1<s.search(/(bot|spider|crawl)/gi))return q(v+"because bot detected");try{function $(e){var t=c.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),n=t?t.map(function(e){return e.split("=")[1]}):[];if(n&&n[0])return n[0]}var _;try{_=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(re){}var k="(utm_)?",A={version:2,hostname:m,https:c.protocol===e,timezone:_,width:d.innerWidth,source:{source:$(k+"source|source|ref"),medium:$(k+"medium"),campaign:$(k+"campaign"),referrer:(u.referrer||"").replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)\/$/,"$1")||y},pageviews:[]},F=0,N=y;d.addEventListener("visibilitychange",function(){u.hidden?N=Date.now():F+=Date.now()-N},!1);function U(e){return Math.round((Date.now()-(e||0))/1e3)}var P,X="sendBeacon",z=JSON.stringify,J=X in o&&!1===/ip(hone|ad)(.*)os\s([1-9]|1[0-2])_/i.test(s);J&&b("unload",function(){try{var e=A[p][A[p].length-1];e.duration=U(D+F),F=0;var t=Math.max(0,H,j());t&&(e.scrolled=t),A.time=U(),o[X](h,z(A))}catch(n){ne(n)}},!1);var W=u.body||{},Z=u.documentElement||{},j=function(){try{var e="Height",t="scroll"+e,n="offset"+e,r="client"+e,a=Z[r]||0,i=Math.max(W[t]||0,W[n]||0,Z[r]||0,Z[t]||0,Z[n]||0);return Math.min(100,5*Math.round(100*((Z.scrollTop||0)+a)/i/5))}catch(o){return ne(o),0}};b("load",function(){H=j(),b("scroll",function(){H<j()&&(H=j())},!1)});function G(e,t,n){try{var r,a=A[p],i=a?a.length:0,o=i?a[i-1]:y;if(e===f){try{r=""+(t instanceof Function?t():t)}catch(u){q("in your event function: "+u.message),r="event_errored"}if(o?o[f]?o[f].push(r):o[f]=[r]:J&&q("Couldn't save event '"+r+"'"),J)return;delete A[p],A[f]=[r]}else{i&&(o.duration=U(D+F),o.scrolled=H),A[p]?A[p].push(t):A[p]=[t],n&&0===i&&delete A.source;try{var s=new XMLHttpRequest;s.open("POST",l,!0),s.setRequestHeader(g,E),s.send(z(A))}catch(u){}if(J)return D=Date.now(),F=0,void(H=d.setTimeout(j,500))}n&&delete A.source;var c=new XMLHttpRequest;c.open("POST",h,!0),A.time=U(),c.setRequestHeader(g,E),c.send(z(A)),delete A[p],delete A[f]}catch(u){ne(u)}}function K(e){var t=T(c.pathname);if("hash"===C&&c.hash&&(t+=c.hash.split("?")[0]),P!==t){var n={path:P=t,added:U()},r=d.performance,a="navigation",i=r&&r.getEntriesByType&&r.getEntriesByType(a)[0]&&r.getEntriesByType(a)[0].type?-1<["reload","back_forward"].indexOf(r.getEntriesByType(a)[0].type):r&&r[a]&&-1<[1,2].indexOf(r[a].type);n.unique=!e&&!i&&(!u.referrer||u.referrer.split("/")[2]!==m),G(p,n,e||i)}}var Q=d.history;if((Q?Q.pushState:y)&&Event&&R){Q.pushState=(S=Q[O=M],function(){var e=S.apply(this,arguments),t=new Event(O);return t.arguments=arguments,R(t),e}),b(M,function(){K(1)},!1),b("popstate",function(){K(1)},!1)}"hash"===C&&"onhashchange"in d&&b("hashchange",function(){K(1)},!1),K();function V(e){G(f,e)}d[L]||(d[L]=V);var Y=d[L],ee=Y&&Y.q?Y.q:[];for(var te in d[L]=V,ee)G(f,ee[te])}catch(re){ne(re)}}function ne(e){e=e.message||e,q(e),(new Image).src=r+"/error.gif?error="+w(e)+"&url="+w(m+c.pathname)}}(window,"<!--# echo var="http_host" default="" -->");