/* Simple Analytics - Privacy friendly analytics (docs.simpleanalytics.com/script; 2020-01-25; 5b18) */

!function(d,t){if(d){var e="https:",n=e+"//",h=n+t+"/v2/post",r=n+t,l=n+t+"/v1/visit",a=d.console,i="doNotTrack",p="pageviews",f="events",o=d.navigator,s=o.userAgent,c=d.location,u=d.document,v=c.hostname,m="Not sending requests ",g="localhost",y="Content-Type",w=null,T=encodeURIComponent,E="text/plain; charset=UTF-8",b=d.addEventListener,q=function(e){a&&a.warn&&a.warn("Simple Analytics: "+e)};b("error",function(e){e.filename&&-1<e.filename.indexOf(t)&&re(e.message)},!1);function x(e,t){return e&&e.getAttribute("data-"+t)}var S,M,O="pushState",D=d.dispatchEvent,H=Date.now(),R=0,B=u.querySelector('script[src*="'+t+'"]'),L=x(B,"mode"),$="true"===x(B,"skip-dnt"),k=x(B,"sa-global")||"sa";if(!$&&i in o&&"1"===o[i])return q(m+"when "+i+" is enabled");if(v===g||"file:"===c.protocol)return q(m+"from "+g);if(!s||-1<s.search(/(bot|spider|crawl)/gi))return q(m+"because bot detected");try{function A(e){var t=c.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),n=t?t.map(function(e){return e.split("=")[1]}):[];if(n&&n[0])return n[0]}var C;try{C=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(ae){}var I="(utm_)?",N={version:2,hostname:v,https:c.protocol===e,timezone:C,width:d.innerWidth,source:{source:A(I+"source|source|ref"),medium:A(I+"medium"),campaign:A(I+"campaign"),referrer:(u.referrer||"").replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)\/$/,"$1")||w},pageviews:[]},_=0,F=w;d.addEventListener("visibilitychange",function(){u.hidden?F=Date.now():_+=Date.now()-F},!1);function P(e){return Math.round((Date.now()-(e||0))/1e3)}var U,X="sendBeacon",z=JSON.stringify,J=X in o&&!1===/ip(hone|ad)(.*)os\s([1-9]|1[0-2])_/i.test(s);J&&b("unload",function(){var e=N[p][N[p].length-1];e.duration=P(H+_),_=0;var t=Math.max(0,R,G());t&&(e.scrolled=t),N.time=P(),o[X](h,z(N))},!1);var W="scroll",Z=u.body||{},j=u.documentElement||{},G=function(){var e="Height",t=W+e,n="offset"+e,r="client"+e,a=j[r]||0,i=Math.max(Z[t]||0,Z[n]||0,j[r]||0,j[t]||0,j[n]||0);return Math.min(100,5*Math.round(100*((j.scrollTop||0)+a)/i/5))};b("load",function(){R=G(),b(W,function(){R<G()&&(R=G())},!1)});function K(e,t,n){var r=N[p],a=r?r.length:0,i=a?r[a-1]:w;if(e===f){var o=""+t;if(i?i[f]?i[f].push(o):i[f]=[o]:J&&q("Couldn't save event '"+o+"'"),J)return;delete N[p],N[f]=[o]}else{a&&(i.duration=P(H+_),i.scrolled=R),r.push(t),n&&0===a&&delete N.source;try{var s=new XMLHttpRequest;s.open("POST",l,!0),s.setRequestHeader(y,E),s.send(z(N))}catch(u){}if(J)return H=Date.now(),_=0,void(R=d.setTimeout(G,500))}n&&delete N.source;var c=new XMLHttpRequest;c.open("POST",h,!0),N.time=P(),c.setRequestHeader(y,E),c.send(z(N)),delete N[p],delete N[f]}function Q(e){var t=c.pathname;if("hash"===L&&c.hash&&(t+=c.hash.split("?")[0]),U!==t){var n={path:U=t,added:P()},r=d.performance,a="navigation",i=r&&r.getEntriesByType&&r.getEntriesByType(a)[0]&&r.getEntriesByType(a)[0].type?-1<["reload","back_forward"].indexOf(r.getEntriesByType(a)[0].type):r&&r[a]&&-1<[1,2].indexOf(r[a].type);n.unique=!e&&!i&&(!u.referrer||u.referrer.split("/")[2]!==v),K(p,n,e||i)}}var V=d.history;if((V?V.pushState:w)&&Event&&D){V.pushState=(M=V[S=O],function(){var e=M.apply(this,arguments),t=new Event(S);return t.arguments=arguments,D(t),e}),b(O,function(){Q(1)},!1),b("popstate",function(){Q(1)},!1)}"hash"===L&&"onhashchange"in d&&b("hashchange",function(){Q(1)},!1),Q();function Y(e){K(f,e)}d[k]||(d[k]=Y);var ee=d[k],te=ee&&ee.q?ee.q:[];for(var ne in d[k]=Y,te)K(f,te[ne])}catch(ae){re(ae.message)}}function re(e){q(e),(new Image).src=r+"/error.gif?error="+T(e)+"&url="+T(v+c.pathname)}}(window,"<!--# echo var="http_host" default="" -->");