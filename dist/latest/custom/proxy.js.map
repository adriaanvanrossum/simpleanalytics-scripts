{"version":3,"file":"proxy.source.js","sources":["proxy.source.js"],"sourcesContent":["/* eslint-env browser */\n\n(function (\n  window,\n  overwriteOptions,\n  baseUrl,\n  apiUrlPrefix,\n  version,\n  defaultNamespace,\n  sendError\n) {\n  try {\n    /////////////////////\n    // PREDEFINED VARIABLES FOR BETTER MINIFICATION\n    //\n\n    // This seems like a lot of repetition, but it makes our script available for\n    // multple destination which prevents us to need multiple scripts. The minified\n    // version stays small.\n    var undefinedVar = undefined;\n    var trueVar = true;\n    var falseVar = false;\n    var trueText = \"true\";\n    var https = \"https:\";\n    var pageviewText = \"pageview\";\n    var eventText = \"event\";\n    var errorText = \"error\";\n    var slash = \"/\";\n    var protocol = https + \"//\";\n    var con = window.console;\n    var doNotTrack = \"doNotTrack\";\n    var nav = window.navigator;\n    var loc = window.location;\n    var locationHostname = loc.host;\n    var doc = window.document;\n    var userAgent = nav.userAgent;\n    var notSending = \"Not sending request \";\n    var fetchedHighEntropyValues = falseVar;\n    var encodeURIComponentFunc = encodeURIComponent;\n    var decodeURIComponentFunc = decodeURIComponent;\n    var stringify = JSON.stringify;\n    var thousand = 1000;\n    var addEventListenerFunc = window.addEventListener;\n    var fullApiUrl = protocol + apiUrlPrefix + baseUrl;\n    var documentElement = doc.documentElement || {};\n    var language = \"language\";\n    var Height = \"Height\";\n    var Width = \"Width\";\n    var scroll = \"scroll\";\n    var uaData = nav.userAgentData;\n    var scrollHeight = scroll + Height;\n    var offsetHeight = \"offset\" + Height;\n    var clientHeight = \"client\" + Height;\n    var clientWidth = \"client\" + Width;\n    var pagehide = \"pagehide\";\n    var platformText = \"platform\";\n    var platformVersionText = \"platformVersion\";\n    var docsUrl = \"https://docs.simpleanalytics.com\";\n    var isBotAgent =\n      /(bot|spider|crawl)/i.test(userAgent) && !/(cubot)/i.test(userAgent);\n    var screen = window.screen;\n\n    // Find the script element where options can be set on\n    var scriptElement =\n      doc.currentScript || doc.querySelector('script[src*=\"' + baseUrl + '\"]');\n\n    /////////////////////\n    // HELPER FUNCTIONS\n    //\n\n    // A simple log function so the user knows why a request is not being send\n    var warn = function (message) {\n      if (con && con.warn) con.warn(\"Simple Analytics:\", message);\n    };\n\n    var hasProp = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n\n    var isString = function (string) {\n      return typeof string == \"string\";\n    };\n\n    var attr = function (scriptElement, attribute) {\n      return scriptElement && scriptElement.getAttribute(\"data-\" + attribute);\n    };\n\n    var convertCommaSeparatedToArray = function (csv) {\n      return Array.isArray(csv)\n        ? csv\n        : isString(csv) && csv.length\n        ? csv.split(/, ?/)\n        : [];\n    };\n\n    // Customers can skip data points\n    var ignoreMetrics = convertCommaSeparatedToArray(\n      overwriteOptions.ignoreMetrics || attr(scriptElement, \"ignore-metrics\")\n    );\n\n    var collectMetricByString = function (metricAbbreviation) {\n      // Can't use Array.find() here because we need to support IE9\n      return (\n        ignoreMetrics.filter(function (item) {\n          return new RegExp(\"^\" + metricAbbreviation).test(item);\n        }).length === 0\n      );\n    };\n\n    var now = Date.now;\n\n    var uuid = function () {\n      var cryptoObject = window.crypto || window.msCrypto;\n      var emptyUUID = [1e7] + -1e3 + -4e3 + -8e3 + -1e11;\n      var uuidRegex = /[018]/g;\n\n      try {\n        return emptyUUID.replace(uuidRegex, function (c) {\n          return (\n            c ^\n            (cryptoObject.getRandomValues(new Uint8Array(1))[0] &\n              (15 >> (c / 4)))\n          ).toString(16);\n        });\n      } catch (error) {\n        return emptyUUID.replace(uuidRegex, function (c) {\n          var r = (Math.random() * 16) | 0,\n            v = c < 2 ? r : (r & 0x3) | 0x8;\n          return v.toString(16);\n        });\n      }\n    };\n\n    var isFunction = function (func) {\n      return typeof func == \"function\";\n    };\n\n    var isObject = function (object) {\n      return object && object.constructor === Object;\n    };\n\n    var assign = function () {\n      var to = {};\n      var arg = arguments;\n      for (var index = 0; index < arg.length; index++) {\n        var nextSource = arg[index];\n        if (isObject(nextSource)) {\n          for (var nextKey in nextSource) {\n            if (hasProp(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    };\n\n    // Define namespace for the library\n    var namespaceText = \"namespace\";\n    var namespace =\n      overwriteOptions[namespaceText] ||\n      attr(scriptElement, namespaceText) ||\n      defaultNamespace;\n\n    var metadataObject = window[namespace + \"_metadata\"];\n    var appendMetadata = function (metadata, data) {\n      if (isObject(metadataObject)) metadata = assign(metadata, metadataObject);\n      var metadataCollectorFunction = window[metadataCollector];\n      if (!isFunction(metadataCollectorFunction)) return metadata;\n      try {\n        return assign(\n          metadata,\n          metadataCollectorFunction.call(window, assign(data, metadata))\n        );\n      } catch (error) {\n        warn(errorText + \" in your metadata function: \" + error);\n      }\n    };\n\n    var isBoolean = function (value) {\n      return !!value === value;\n    };\n\n    // By default we allow source, medium in the URLs. With strictUtm enabled\n    // we only allow it with the utm_ prefix: utm_source, utm_medium, ...\n    var strictUtm =\n      overwriteOptions.strictUtm ||\n      attr(scriptElement, \"strict-utm\") == trueText;\n\n    var getQueryParams = function (ignoreSource) {\n      return (\n        loc.search\n          .slice(1)\n          .split(\"&\")\n          .filter(function (keyValue) {\n            var ignore = ignoreSource || !collectMetricByString(\"ut\");\n\n            var paramsRegexList = allowParams.join(\"|\");\n            var regex = ignore\n              ? \"^(\" + paramsRegexList + \")=\"\n              : \"^((utm_)\" +\n                (strictUtm ? \"\" : \"?\") +\n                \"(source|medium|content|term|campaign)\" +\n                (strictUtm ? \"\" : \"|ref\") +\n                \"|\" +\n                paramsRegexList +\n                \")=\";\n            if (ignore && !allowParams.length) return falseVar;\n\n            // The prefix \"utm_\" is optional with \"strictUtm\" disabled\n            // \"ref\" is only collected when \"strictUtm\" is disabled\n            return new RegExp(regex).test(keyValue);\n          })\n          .join(\"&\") || undefinedVar\n      );\n    };\n\n    // Ignore pages specified in data-ignore-pages\n    var shouldIgnore = function (path) {\n      for (var i in ignorePages) {\n        var ignorePageRaw = ignorePages[i];\n        if (!ignorePageRaw) continue;\n\n        // Prepend a slash when it's missing\n        var ignorePage =\n          ignorePageRaw[0] == slash ? ignorePageRaw : slash + ignorePageRaw;\n\n        try {\n          if (\n            ignorePage === path ||\n            new RegExp(ignorePage.replace(/\\*/gi, \"(.*)\"), \"gi\").test(path)\n          )\n            return trueVar;\n        } catch (error) {\n          return falseVar;\n        }\n      }\n      return falseVar;\n    };\n\n    /////////////////////\n    // Warn when using script twice\n    //\n\n    // Only load our script once, customers can still send multiple page views\n    // with the sa_pageview function if they turn off auto collect.\n    var loadedVariable = namespace + \"_loaded\";\n    if (window[loadedVariable] == trueVar) return warn(notSending + \"twice\");\n    window.sa_event_loaded = trueVar;\n    window[loadedVariable] = trueVar;\n\n    /////////////////////\n    // SEND DATA VIA OUR PIXEL\n    //\n\n    // Send data via image\n    var sendData = function (data, callback, onlyThisData) {\n      return braveCallback(function (isBrave) {\n        data = onlyThisData ? data : assign(payload, page, data);\n\n        if (isBrave && !onlyThisData) data.brave = trueVar;\n\n\n        var image = new Image();\n        if (callback) {\n          image.onerror = callback;\n          image.onload = callback;\n        }\n        image.src =\n          fullApiUrl +\n          \"/simple.gif?\" +\n          Object.keys(data)\n            .filter(function (key) {\n              return data[key] != undefinedVar;\n            })\n            .map(function (key) {\n              return (\n                encodeURIComponentFunc(key) +\n                \"=\" +\n                encodeURIComponentFunc(data[key])\n              );\n            })\n            .join(\"&\") +\n          \"&time=\" +\n          Date.now();\n      });\n    };\n\n    /////////////////////\n    // ERROR FUNCTIONS\n    //\n\n    // Send errors\n    // no var because it's scoped outside of the try/catch\n    sendError = function (errorOrMessage) {\n      errorOrMessage = errorOrMessage.message || errorOrMessage;\n      warn(errorOrMessage);\n      sendData({\n        type: errorText,\n        error: errorOrMessage,\n        url: definedHostname + loc.pathname,\n      });\n    };\n\n    // We listen for the error events and only send errors that are\n    // from our script (checked by filename) to our server.\n    addEventListenerFunc(\n      errorText,\n      function (event) {\n        if (event.filename && event.filename.indexOf(baseUrl) > -1) {\n          sendError(event.message);\n        }\n      },\n      falseVar\n    );\n\n    /////////////////////\n    // INITIALIZE VALUES\n    //\n\n    var duration = \"duration\";\n    var start = now();\n\n    var scrolled = 0;\n\n    /////////////////////\n    // GET SETTINGS\n    //\n\n    // Script mode, this can be hash mode for example\n    var mode = overwriteOptions.mode || attr(scriptElement, \"mode\");\n\n    // Should we record Do Not Track visits?\n    var collectDnt = isBoolean(overwriteOptions.collectDnt)\n      ? overwriteOptions.collectDnt\n      : attr(scriptElement, \"ignore-dnt\") == trueText ||\n        attr(scriptElement, \"skip-dnt\") == trueText ||\n        attr(scriptElement, \"collect-dnt\") == trueText;\n\n    // Customers can overwrite their hostname, here we check for that\n    var overwrittenHostname =\n      overwriteOptions.hostname || attr(scriptElement, \"hostname\");\n    var definedHostname = overwrittenHostname || locationHostname;\n\n    // Some customers want to collect page views manually\n    var autoCollect = !(\n      attr(scriptElement, \"auto-collect\") == \"false\" ||\n      overwriteOptions.autoCollect === falseVar\n    );\n\n    // Event function name\n    var eventFunctionName =\n      overwriteOptions.saGlobal ||\n      attr(scriptElement, \"sa-global\") ||\n      namespace + \"_\" + eventText;\n\n    // Customers can ignore certain pages\n    var ignorePages = convertCommaSeparatedToArray(\n      overwriteOptions.ignorePages || attr(scriptElement, \"ignore-pages\")\n    );\n\n    // Customers can allow params\n    var allowParams = convertCommaSeparatedToArray(\n      overwriteOptions.allowParams || attr(scriptElement, \"allow-params\")\n    );\n\n    // Customers can allow params\n    var nonUniqueHostnames = convertCommaSeparatedToArray(\n      overwriteOptions.nonUniqueHostnames ||\n        attr(scriptElement, \"non-unique-hostnames\")\n    );\n\n    // Customers can overwrite certain values\n    var pathOverwriter =\n      overwriteOptions.pathOverwriter || attr(scriptElement, \"path-overwriter\");\n\n    // Customers can add metadata to events and pageviews via a function\n    var metadataCollector =\n      overwriteOptions.metadataCollector ||\n      attr(scriptElement, \"metadata-collector\");\n\n    var braveCallback = function (callback) {\n      if (!nav.brave) callback(falseVar);\n      else\n        nav.brave\n          .isBrave()\n          .then(function () {\n            callback(trueVar);\n          })\n          .catch(function () {\n            callback(falseVar);\n          });\n    };\n\n    // This code could error on (incomplete) implementations, that's why we use try...catch\n    var timezone;\n    try {\n      // c = countries\n      timezone = collectMetricByString(\"c\")\n        ? Intl.DateTimeFormat().resolvedOptions().timeZone\n        : undefinedVar;\n    } catch (e) {\n      /* Do nothing */\n    }\n\n    /////////////////////\n    // PAYLOAD FOR BOTH PAGE VIEWS AND EVENTS\n    //\n\n    var bot =\n      nav.webdriver ||\n      window.__nightmare ||\n      window.callPhantom ||\n      window._phantom ||\n      window.phantom ||\n      window.__polypane ||\n      window._bot ||\n      isBotAgent;\n\n    // t = timeonpage, scro = scrolled\n    var collectDataOnLeave =\n      collectMetricByString(\"t\") || collectMetricByString(\"scro\");\n\n    var payload = {\n      version: version,\n      // us = useragent\n      ua: collectMetricByString(\"us\") ? userAgent : undefinedVar,\n      https: loc.protocol == https,\n      timezone: timezone,\n      hostname: definedHostname,\n      page_id: collectDataOnLeave ? uuid() : undefinedVar,\n      // se = sessions\n      session_id: collectMetricByString(\"se\") ? uuid() : undefinedVar,\n    };\n    if (bot) payload.bot = trueVar;\n\n    payload.sri = falseVar;\n\n    // Use User-Agent Client Hints for better privacy\n    // https://web.dev/user-agent-client-hints/\n    if (uaData) {\n      payload.mobile = uaData.mobile;\n      payload.brands = stringify(uaData.brands);\n    }\n\n    /////////////////////\n    // ADD WARNINGS\n    //\n\n\n    // Warn when no document.doctype is defined (this breaks some documentElement dimensions)\n    if (!doc.doctype) warn(\"Add DOCTYPE html for accurate dimensions\");\n\n    // When a customer overwrites the hostname, we need to know what the original\n    // hostname was to hide that domain from referrer traffic\n    if (definedHostname !== locationHostname)\n      payload.hostname_original = locationHostname;\n\n    // Don't track when Do Not Track is set to true\n    if (!collectDnt && doNotTrack in nav && nav[doNotTrack] == \"1\")\n      return warn(\n        notSending +\n          \"when \" +\n          doNotTrack +\n          \" is enabled. See \" +\n          docsUrl +\n          \"/dnt\"\n      );\n\n    // Warn when sending from localhost and not having a hostname set\n    if (\n      (locationHostname.indexOf(\".\") == -1 ||\n        /^[0-9.:]+$/.test(locationHostname)) &&\n      !overwrittenHostname\n    )\n      warn(\n        \"Set hostname on \" +\n          locationHostname +\n          \". See \" +\n          docsUrl +\n          \"/overwrite-domain-name\"\n      );\n\n    /////////////////////\n    // SETUP INITIAL VARIABLES\n    //\n\n    var page = {};\n    var lastSendPath;\n\n    // We don't want to end up with sensitive data so we clean the referrer URL\n    var referrer =\n      (doc.referrer || \"\")\n        .replace(locationHostname, definedHostname)\n        .replace(/^https?:\\/\\/((m|l|w{2,3}([0-9]+)?)\\.)?([^?#]+)(.*)$/, \"$4\")\n        .replace(/^([^/]+)$/, \"$1\") || undefinedVar;\n\n    /////////////////////\n    // TIME ON PAGE AND SCROLLED LOGIC\n    //\n\n    // We don't put msHidden in if duration block, because it's used outside of that functionality\n    var msHidden = 0;\n\n    var sendOnLeave = function (id, push) {\n      if (!collectDataOnLeave) return;\n\n      var append = {\n        type: \"append\",\n        hostname: definedHostname,\n        original_id: push ? id : payload.page_id,\n      };\n\n      // t = timeonpage\n      if (collectMetricByString(\"t\")) {\n        append[duration] = Math.round((now() - start - msHidden) / thousand);\n      }\n      msHidden = 0;\n      start = now();\n\n      // scro = scrolled\n      if (collectMetricByString(\"scro\")) {\n        append.scrolled = Math.max(0, scrolled, position());\n      }\n\n      if (push || !nav.sendBeacon) {\n        // sendData will assign payload to request\n        sendData(append, undefinedVar, trueVar);\n      } else {\n        nav.sendBeacon(fullApiUrl + \"/append\", stringify(append));\n      }\n    };\n\n    var hiddenStart;\n    addEventListenerFunc(\n      \"visibilitychange\",\n      function () {\n        if (doc.hidden) {\n          if (!(\"on\" + pagehide in window)) sendOnLeave();\n          hiddenStart = now();\n        } else msHidden += now() - hiddenStart;\n      },\n      falseVar\n    );\n\n    addEventListenerFunc(pagehide, sendOnLeave, falseVar);\n\n    var body = doc.body || {};\n    var position = function () {\n      try {\n        var documentClientHeight = documentElement[clientHeight] || 0;\n        var height = Math.max(\n          body[scrollHeight] || 0,\n          body[offsetHeight] || 0,\n          documentElement[clientHeight] || 0,\n          documentElement[scrollHeight] || 0,\n          documentElement[offsetHeight] || 0\n        );\n        return Math.min(\n          100,\n          Math.round(\n            (100 * ((documentElement.scrollTop || 0) + documentClientHeight)) /\n              height /\n              5\n          ) * 5\n        );\n      } catch (error) {\n        return 0;\n      }\n    };\n\n    addEventListenerFunc(\"load\", function () {\n      scrolled = position();\n      addEventListenerFunc(\n        scroll,\n        function () {\n          if (scrolled < position()) scrolled = position();\n        },\n        falseVar\n      );\n    });\n\n    /////////////////////\n    // ACTUAL PAGE VIEW LOGIC\n    //\n\n    var getPath = function (overwrite) {\n      var path = \"\";\n\n      // decodeURIComponent can fail when having invalid characters\n      // https://github.com/simpleanalytics/roadmap/issues/462\n      try {\n        path = overwrite || decodeURIComponentFunc(loc.pathname);\n      } catch (e) {\n        // Do nothing\n      }\n\n      var pathOverwriterFunction = window[pathOverwriter];\n      if (isFunction(pathOverwriterFunction)) {\n        path = pathOverwriterFunction.call(window, path);\n      }\n\n      // Ignore pages specified in data-ignore-pages\n      if (shouldIgnore(path)) {\n        warn(notSending + \", ignored \" + path);\n        return;\n      }\n\n      // Add hash to path when script is put in to hash mode\n      if (mode == \"hash\" && loc.hash) path += loc.hash.split(\"?\")[0];\n\n      return path;\n    };\n\n    // Send page view and append data to it\n    var sendPageView = function (\n      isPushState,\n      deleteSourceInfo,\n      sameSite,\n      metadata\n    ) {\n      if (isPushState) sendOnLeave(\"\" + payload.page_id, trueVar);\n      if (collectDataOnLeave) payload.page_id = uuid();\n\n      var currentPage = definedHostname + getPath();\n\n      sendData({\n        id: payload.page_id,\n        type: pageviewText,\n        referrer: !deleteSourceInfo || sameSite ? referrer : null,\n        query: getQueryParams(deleteSourceInfo),\n\n        metadata: stringify(metadata),\n      });\n\n      referrer = currentPage;\n    };\n\n    var pageview = function (isPushState, pathOverwrite, metadata) {\n      // Obfuscate personal data in URL by dropping the search and hash\n      var path = getPath(pathOverwrite);\n\n      // Don't send the last path again (this could happen when pushState is used to change the path hash or search)\n      if (!path || lastSendPath == path) return;\n\n      lastSendPath = path;\n      page.path = path;\n\n      // v = viewportsizes\n      if (collectMetricByString(\"v\")) {\n        page.viewport_width =\n          Math.max(documentElement[clientWidth] || 0, window.innerWidth || 0) ||\n          null;\n        page.viewport_height =\n          Math.max(\n            documentElement[clientHeight] || 0,\n            window.innerHeight || 0\n          ) || null;\n      }\n\n      // l = language\n      if (collectMetricByString(\"l\")) {\n        if (nav[language]) page[language] = nav[language];\n      }\n\n      // sc = screensizes\n      if (screen && collectMetricByString(\"sc\")) {\n        page.screen_width = screen.width;\n        page.screen_height = screen.height;\n      }\n\n      // If a user does refresh we need to delete the referrer because otherwise it count double\n      var perf = window.performance;\n      var navigationText = \"navigation\";\n\n      // Check if back, forward or reload buttons are being used in modern browsers\n      var userNavigated =\n        perf &&\n        perf.getEntriesByType &&\n        perf.getEntriesByType(navigationText)[0] &&\n        perf.getEntriesByType(navigationText)[0].type\n          ? [\"reload\", \"back_forward\"].indexOf(\n              perf.getEntriesByType(navigationText)[0].type\n            ) > -1\n          : // Check if back, forward or reload buttons are being use in older browsers\n            // 1: TYPE_RELOAD, 2: TYPE_BACK_FORWARD\n            perf &&\n            perf[navigationText] &&\n            [1, 2].indexOf(perf[navigationText].type) > -1;\n\n      // Check if referrer is the same as current real hostname (not the defined hostname!)\n      var currentReferrerHostname = doc.referrer.split(slash)[2];\n      var sameSite = referrer\n        ? nonUniqueHostnames.indexOf(currentReferrerHostname) > -1 ||\n          currentReferrerHostname == locationHostname\n        : falseVar;\n\n      // We set unique variable based on pushstate or back navigation, if no match we check the referrer\n      page.unique = isPushState || userNavigated ? falseVar : !sameSite;\n\n      metadata = appendMetadata(metadata, {\n        type: pageviewText,\n        path: page.path,\n      });\n\n      var triggerSendPageView = function () {\n        fetchedHighEntropyValues = trueVar;\n        sendPageView(\n          isPushState,\n          isPushState || userNavigated || !collectMetricByString(\"r\"), // r = referrers\n          sameSite,\n          metadata\n        );\n      };\n\n      if (!fetchedHighEntropyValues) {\n        // Request platform information if this is available\n        try {\n          if (uaData && isFunction(uaData.getHighEntropyValues)) {\n            uaData\n              .getHighEntropyValues([platformText, platformVersionText])\n              .then(function (highEntropyValues) {\n                payload.os_name = highEntropyValues[platformText];\n                payload.os_version = highEntropyValues[platformVersionText];\n                triggerSendPageView();\n              })\n              .catch(triggerSendPageView);\n          } else {\n            triggerSendPageView();\n          }\n        } catch (e) {\n          triggerSendPageView();\n        }\n      } else {\n        triggerSendPageView();\n      }\n    };\n\n    /////////////////////\n    // AUTOMATED PAGE VIEW COLLECTION\n    //\n\n    var his = window.history;\n    var hisPushState = his ? his.pushState : undefinedVar;\n    var dis = window.dispatchEvent;\n    var pushStateText = \"pushState\";\n\n    // Overwrite history pushState function to\n    // allow listening on the pushState event\n    if (autoCollect && hisPushState && Event && dis) {\n      var stateListener = function (type) {\n        var orig = his[type];\n        return function () {\n          var arg = arguments;\n          var rv = orig.apply(this, arg);\n          var event;\n          if (isFunction(Event)) {\n            event = new Event(type);\n          } else {\n            // Fix for IE\n            // https://github.com/simpleanalytics/scripts/issues/8\n            event = doc.createEvent(\"Event\");\n            event.initEvent(type, trueVar, trueVar);\n          }\n          event.arguments = arg;\n          dis(event);\n          return rv;\n        };\n      };\n\n      his.pushState = stateListener(pushStateText);\n\n      addEventListenerFunc(\n        pushStateText,\n        function () {\n          pageview(1);\n        },\n        falseVar\n      );\n\n      addEventListenerFunc(\n        \"popstate\",\n        function () {\n          pageview(1);\n        },\n        falseVar\n      );\n    }\n\n    // When in hash mode, we record a pageview based on the onhashchange function\n    if (autoCollect && mode == \"hash\" && \"onhashchange\" in window) {\n      addEventListenerFunc(\n        \"hashchange\",\n        function () {\n          pageview(1);\n        },\n        falseVar\n      );\n    }\n\n    if (autoCollect) pageview();\n    else {\n      window.sa_pageview = function (path, metadata) {\n        pageview(0, path, metadata);\n      };\n    }\n\n    /////////////////////\n    // EVENTS\n    //\n\n    var validTypes = [\"string\", \"number\"];\n\n    var sendEvent = function (event, metadata, callbackRaw) {\n      if (!callbackRaw && isFunction(metadata)) callbackRaw = metadata;\n\n      var eventIsFunction = isFunction(event);\n      var callback = isFunction(callbackRaw) ? callbackRaw : function () {};\n\n      if (validTypes.indexOf(typeof event) < 0 && !eventIsFunction) {\n        warn(eventText + \" isn't a string: \" + event);\n        return callback();\n      }\n\n      try {\n        if (eventIsFunction) {\n          event = event();\n          if (validTypes.indexOf(typeof event) < 0) {\n            warn(eventText + \" function output isn't a string: \" + event);\n            return callback();\n          }\n        }\n      } catch (error) {\n        warn(errorText + \" in your event function: \" + error);\n        return callback();\n      }\n\n      event = (\"\" + event).replace(/[^a-z0-9]+/gi, \"_\").replace(/(^_|_$)/g, \"\");\n\n      var eventParams = { type: eventText, event: event };\n\n      metadata = appendMetadata(metadata, eventParams);\n\n      if (event) {\n        sendData(\n          assign(eventParams, {\n            query: getQueryParams(),\n\n            metadata: stringify(metadata),\n          }),\n          callback\n        );\n      }\n    };\n\n    var defaultEventFunc = function (event, callback) {\n      sendEvent(event, callback);\n    };\n\n    // Set default function if user didn't define a function\n    if (!window[eventFunctionName])\n      window[eventFunctionName] = defaultEventFunc;\n\n    var eventFunc = window[eventFunctionName];\n\n    // Read queue of the user defined function\n    var queue = eventFunc && eventFunc.q ? eventFunc.q : [];\n\n    // Overwrite user defined function\n    window[eventFunctionName] = defaultEventFunc;\n\n    // Post events from the queue of the user defined function\n    for (var event in queue) {\n      if (hasProp(queue, event)) {\n        Array.isArray(queue[event])\n          ? sendEvent.apply(null, queue[event])\n          : sendEvent(queue[event]);\n      }\n    }\n  } catch (e) {\n    sendError(e);\n  }\n})(\n  window,\n  {},\n  \"<!--# echo var="proxy_hostname" default="" --><!--# echo var="proxy_path" default="/simple" -->\",\n  \"\",\n  \"custom_proxy_9\",\n  \"sa\"\n);\n"],"names":["window","overwriteOptions","baseUrl","sendError","undefinedVar","undefined","trueVar","falseVar","trueText","https","pageviewText","eventText","errorText","con","console","doNotTrack","nav","navigator","loc","location","locationHostname","host","doc","document","userAgent","notSending","fetchedHighEntropyValues","encodeURIComponentFunc","encodeURIComponent","decodeURIComponentFunc","decodeURIComponent","stringify","JSON","addEventListenerFunc","addEventListener","fullApiUrl","documentElement","language","Height","scroll","uaData","userAgentData","scrollHeight","offsetHeight","clientHeight","pagehide","platformText","platformVersionText","docsUrl","isBotAgent","test","screen","scriptElement","currentScript","querySelector","warn","message","hasProp","obj","prop","Object","prototype","hasOwnProperty","call","attr","attribute","getAttribute","convertCommaSeparatedToArray","csv","Array","isArray","length","split","ignoreMetrics","collectMetricByString","metricAbbreviation","filter","item","RegExp","now","Date","uuid","cryptoObject","crypto","msCrypto","emptyUUID","uuidRegex","replace","c","getRandomValues","Uint8Array","toString","error","r","Math","random","isFunction","func","isObject","object","constructor","assign","to","arg","arguments","index","nextSource","nextKey","namespaceText","namespace","metadataObject","appendMetadata","metadata","data","metadataCollectorFunction","metadataCollector","strictUtm","getQueryParams","ignoreSource","search","slice","keyValue","ignore","paramsRegexList","allowParams","join","regex","loadedVariable","sa_event_loaded","sendData","callback","onlyThisData","braveCallback","isBrave","payload","page","brave","image","Image","onerror","onload","src","keys","key","map","errorOrMessage","type","url","definedHostname","pathname","event","filename","indexOf","timezone","start","scrolled","mode","collectDnt","value","overwrittenHostname","hostname","autoCollect","eventFunctionName","saGlobal","ignorePages","nonUniqueHostnames","pathOverwriter","then","catch","Intl","DateTimeFormat","resolvedOptions","timeZone","e","bot","webdriver","__nightmare","callPhantom","_phantom","phantom","__polypane","_bot","collectDataOnLeave","version","ua","protocol","page_id","session_id","sri","mobile","brands","doctype","hostname_original","lastSendPath","hiddenStart","referrer","msHidden","sendOnLeave","id","push","append","original_id","round","max","position","sendBeacon","hidden","body","documentClientHeight","height","min","scrollTop","getPath","overwrite","path","pathOverwriterFunction","i","ignorePageRaw","ignorePage","shouldIgnore","hash","pageview","isPushState","pathOverwrite","viewport_width","innerWidth","viewport_height","innerHeight","screen_width","width","screen_height","perf","performance","navigationText","userNavigated","getEntriesByType","currentReferrerHostname","sameSite","unique","triggerSendPageView","deleteSourceInfo","currentPage","query","sendPageView","getHighEntropyValues","highEntropyValues","os_name","os_version","his","history","hisPushState","pushState","dis","dispatchEvent","pushStateText","Event","orig","rv","apply","this","createEvent","initEvent","sa_pageview","validTypes","sendEvent","callbackRaw","eventIsFunction","eventParams","defaultEventFunc","eventFunc","queue","q"],"mappings":"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"}