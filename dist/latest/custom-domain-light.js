/* Simple Analytics - Privacy friend analytics (docs.simpleanalytics.com/script) 2020-01-16 */

!function(e){if(e){function i(e){o&&o.warn&&o.warn("Simple Analytics: "+e)}function t(e,t){return e&&e.getAttribute("data-"+t)}var n,a,r="https:",s=r+"//",c=s+"<!--# echo var="http_host" default="" -->/v2/",o=e.console,u="doNotTrack",h="pageviews",p="events",d=e.navigator,l=d.userAgent,f=e.location,m=e.document,g=f.hostname,v="Not sending requests ",w="localhost",y="pushState",b=e.dispatchEvent,S=m.querySelector('script[src="'+s+'<!--# echo var="http_host" default="" -->/light.js"]'),E=t(S,"mode"),T="true"===t(S,"skip-dnt");t(S,"sa-global");if(!T&&u in d&&"1"===d[u])return i(v+"when "+u+" is enabled");if(g===w||"file:"===f.protocol)return i(v+"from "+w);if(!l||-1<l.search(/(bot|spider|crawl)/gi))return i(v+"because bot detected");try{function q(e){var t=f.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),n=t?t.map(function(e){return e.split("=")[1]}):[];if(n&&n[0])return n[0]}var R;try{R=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(L){}function $(e){return Math.round((Date.now()-(e||0))/1e3)}var A,C="(utm_)?",I={version:2,hostname:g,https:f.protocol===r,timezone:R,width:e.innerWidth,source:{source:q(C+"source|source|ref"),medium:q(C+"medium"),campaign:q(C+"campaign"),referrer:(m.referrer||"").replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)\/$/,"$1")||undefined},pageviews:[]},N="sendBeacon",O=e.addEventListener,k=JSON.stringify,x=N in d&&!1===/ip(hone|ad)(.*)os\s([1-9]|1[0-2])_/i.test(l);x&&O("unload",function(){I[h][I[h].length-1];I.time=$(),d[N](c+"post",k(I))},!1);function D(e){var t=f.pathname;if("hash"===E&&f.hash&&(t+=f.hash.split("?")[0]),A!==t){var n={path:A=t,added:$()};!function(e,t,n){var a=I[h],r=a.length,s=r?a[r-1]:null;if(e!==p){if(a.push(t),!x){var o=new XMLHttpRequest;o.open("POST",c+e,!0),n&&delete I.source,I.time=$(),o.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),o.send(k(I))}}else s?s[p]?s[p].push(t):s[p]=[t]:i("Couldn't save event '"+t+"' because no page view was found")}(h,n,e)}}var F=e.history;if((F?F.pushState:null)&&Event&&b){F.pushState=(a=F[n=y],function(){var e=a.apply(this,arguments),t=new Event(n);return t.arguments=arguments,b(t),e}),O(y,function(){D(1)}),e.onpopstate=function(){D(1)}}"hash"===E&&"onhashchange"in e&&(e.onhashchange=function(){D(1)}),D()}catch(L){i(L.message);var H=c+"image.gif";L.message&&(H=H+"?error="+encodeURIComponent(L.message)),(new Image).src=H}}}(window);