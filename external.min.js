!function(a,e){if(a){var r,n,i=a.navigator,s=a.location,o=s.hostname,c=a.document,t=a.console,u="//"+e,h="https://"+e;try{function p(e,t){return e&&e.getAttribute("data-"+t)}function l(e){t&&t.warn&&t.warn("Simple Analytics: "+e)}var f,m=i.userAgent,d=a.dispatchEvent,g="Not sending requests ",v=c.querySelector('script[src$="'+u+'/app.js"]'),w=p(v,"mode"),y="true"===p(v,"skip-dnt"),b=p(v,"sa-global")||"sa";if("localhost"===o)return l(g+"from localhost");if(/(bot|spider|crawl)/i.test(m))return l(g+"because user agent is a robot");function S(e){var t=s.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),r=t?t.map(function(e){return e.split("=")[1]}):[];if(r&&r[0])return r[0]}function E(e){var t=s.protocol+"//"+o+s.pathname;if("hash"===w&&s.hash&&(t+=s.hash.split("?")[0]),f!==t){if(f=t,"visibilityState"in c&&"prerender"===c.visibilityState)return l(g+"when prerender");if(!y&&"doNotTrack"in i&&"1"===i.doNotTrack)return l(g+"when doNotTrack is enabled");var r={url:t};m&&(r.ua=m),T&&(r.urlReferrer=T),R&&!e&&(r.referrer=R),a.innerWidth&&(r.width=a.innerWidth);try{r.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}var n=new XMLHttpRequest;n.open("POST",u+"/api",!0),n.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),n.send(JSON.stringify(r))}}var T=S("utm_source|source|ref"),q=S("utm_campaign|campaign"),R=c.referrer.replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)\/$/,"$1"),$=a.history;if(($?$.pushState:null)&&Event&&d){$.pushState=(n=$[r="pushState"],function(){var e=n.apply(this,arguments),t=new Event(r);return t.arguments=arguments,d(t),e}),a.addEventListener("pushState",function(){E(!0)})}"hash"===w&&"onhashchange"in a&&(a.onhashchange=E),E();var k=/\.(.+)/.exec(e)[1];if(o!==k&&!new RegExp("."+k+"$","i").test(o))return l("Events via this script only work on "+k+" domains");function N(){A=!0;var n=c.createElement("iframe");n.setAttribute("src",u+"/iframe.html"),n.style.display="none",n.onload=function(){var t=n.contentWindow,r=T||R;try{if(x)for(var e=0;e<x.length;e++)t.postMessage({event:x[e][0],ref:r,campaign:q},h)}catch(e){}a[b]=function(e){t.postMessage({event:e,ref:r,campaign:q},h)}},c.body.appendChild(n)}var x=a[b]&&a[b].q?a[b].q:[],A=!1;a[b]=function(){A||N(),x.push([].slice.call(arguments))},!A&&x.length&&N()}catch(e){t&&t.error&&t.error(e);var C=u+"/image.gif";e&&e.message&&(C=C+"?error="+encodeURIComponent(e.message)),(new Image).src=C}}}(window,'<!--# echo var="http_host" default="" -->');
